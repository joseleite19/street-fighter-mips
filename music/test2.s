.data

LAST_T:		.word 0
CUR_N:		.word 0
CONT:		.word 303
INIT:		.word 0
NOTAS:		.word 74, 75, 75, 74, 74, 75, 74, 75, 75, 74, 74, 75, 74, 75, 74, 75, 74, 77, 77, 75, 74, 70, 75, 75, 74, 74, 75, 74, 75, 75, 74, 74, 75, 74, 75, 74, 75, 74, 77, 77, 75, 74, 70, 60, 62, 63, 65, 67, 65, 70, 68, 67, 68, 62, 63, 65, 58, 62, 65, 68, 70, 67, 62, 60, 62, 63, 65, 67, 65, 65, 65, 67, 68, 70, 72, 74, 75, 79, 77, 74, 70, 72, 74, 75, 77, 72, 74, 75, 77, 79, 70, 70, 80, 79, 77, 79, 77, 75, 74, 70, 72, 67, 70, 70, 72, 74, 75, 77, 79, 80, 77, 74, 72, 74, 74, 75, 77, 70, 74, 77, 80, 79, 77, 79, 77, 75, 72, 74, 75, 77, 79, 75, 74, 72, 74, 75, 72, 70, 70, 72, 74, 75, 77, 79, 72, 82, 80, 79, 77, 74, 75, 72, 75, 75, 74, 74, 75, 74, 75, 75, 74, 74, 75, 74, 75, 74, 75, 74, 77, 77, 75, 74, 70, 75, 75, 74, 74, 75, 74, 75, 75, 74, 74, 75, 74, 75, 74, 75, 74, 77, 77, 75, 74, 70, 60, 62, 63, 65, 67, 65, 70, 68, 67, 68, 62, 63, 65, 58, 62, 65, 68, 70, 67, 62, 60, 62, 63, 65, 67, 65, 65, 65, 67, 68, 70, 72, 74, 75, 79, 77, 74, 70, 72, 74, 75, 77, 72, 74, 75, 77, 79, 70, 70, 80, 79, 77, 79, 77, 75, 74, 70, 72, 67, 70, 70, 72, 74, 75, 77, 79, 80, 77, 74, 72, 74, 74, 75, 77, 70, 74, 77, 80, 79, 77, 79, 77, 75, 72, 74, 75, 77, 79, 75, 74, 72, 74, 75, 72, 70, 70, 72, 74, 75, 77, 79, 72, 82, 80, 79, 77, 74, 75, 72
DURACAO:	.word 576, 96, 96, 96, 96, 768, 192, 96, 96, 96, 96, 768, 192, 96, 96, 192, 96, 96, 96, 96, 192, 192, 96, 96, 96, 96, 768, 192, 96, 96, 96, 96, 768, 192, 96, 96, 192, 96, 96, 96, 96, 192, 192, 960, 192, 96, 288, 384, 288, 288, 192, 96, 288, 384, 288, 192, 192, 96, 288, 384, 288, 480, 384, 960, 192, 96, 288, 384, 192, 384, 192, 96, 288, 768, 192, 96, 288, 384, 384, 384, 384, 960, 192, 192, 192, 960, 96, 96, 288, 2688, 96, 192, 960, 96, 96, 288, 384, 384, 384, 384, 384, 2304, 96, 192, 960, 192, 96, 192, 384, 192, 384, 192, 96, 288, 384, 288, 192, 192, 96, 192, 672, 96, 96, 384, 192, 192, 960, 192, 192, 1152, 192, 96, 288, 96, 96, 96, 2400, 192, 192, 960, 192, 96, 192, 384, 192, 384, 192, 192, 96, 96, 96, 2688, 96, 96, 96, 96, 768, 192, 96, 96, 96, 96, 768, 192, 96, 96, 192, 96, 96, 96, 96, 192, 192, 96, 96, 96, 96, 768, 192, 96, 96, 96, 96, 768, 192, 96, 96, 192, 96, 96, 96, 96, 192, 192, 960, 192, 96, 288, 384, 288, 288, 192, 96, 288, 384, 288, 192, 192, 96, 288, 384, 288, 480, 384, 960, 192, 96, 288, 384, 192, 384, 192, 96, 288, 768, 192, 96, 288, 384, 384, 384, 384, 960, 192, 192, 192, 960, 96, 96, 288, 2688, 96, 192, 960, 96, 96, 288, 384, 384, 384, 384, 384, 2304, 96, 192, 960, 192, 96, 192, 384, 192, 384, 192, 96, 288, 384, 288, 192, 192, 96, 192, 672, 96, 96, 384, 192, 192, 960, 192, 192, 1152, 192, 96, 288, 96, 96, 96, 2400, 192, 192, 960, 192, 96, 192, 384, 192, 384, 192, 192, 96, 96, 96, 2688
DTIME:		.word 100,576, 192, 96, 192, 96, 768, 192, 192, 96, 192, 96, 768, 192, 96, 192, 192, 192, 192, 96, 192, 192, 192, 192, 96, 192, 96, 768, 192, 192, 96, 192, 96, 768, 192, 96, 192, 192, 192, 192, 96, 192, 192, 192, 960, 192, 96, 288, 384, 288, 288, 192, 96, 288, 384, 288, 288, 192, 96, 288, 384, 288, 480, 384, 960, 192, 96, 288, 384, 192, 384, 192, 96, 288, 960, 192, 96, 288, 384, 384, 384, 384, 960, 192, 192, 192, 960, 192, 96, 288, 2688, 192, 192, 960, 192, 96, 288, 384, 384, 384, 384, 384, 2304, 192, 192, 960, 192, 96, 192, 384, 288, 384, 192, 96, 288, 384, 288, 288, 192, 96, 192, 672, 96, 96, 384, 192, 192, 960, 192, 192, 1152, 192, 96, 288, 96, 96, 88, 2408, 192, 192, 960, 192, 96, 192, 384, 288, 384, 192, 192, 192, 96, 184, 2792, 192, 96, 192, 96, 768, 192, 192, 96, 192, 96, 768, 192, 96, 192, 192, 192, 192, 96, 192, 192, 192, 192, 96, 192, 96, 768, 192, 192, 96, 192, 96, 768, 192, 96, 192, 192, 192, 192, 96, 192, 192, 192, 960, 192, 96, 288, 384, 288, 288, 192, 96, 288, 384, 288, 288, 192, 96, 288, 384, 288, 480, 384, 960, 192, 96, 288, 384, 192, 384, 192, 96, 288, 960, 192, 96, 288, 384, 384, 384, 384, 960, 192, 192, 192, 960, 192, 96, 288, 2688, 192, 192, 960, 192, 96, 288, 384, 384, 384, 384, 384, 2304, 192, 192, 960, 192, 96, 192, 384, 288, 384, 192, 96, 288, 384, 288, 288, 192, 96, 192, 672, 96, 96, 384, 192, 192, 960, 192, 192, 1152, 192, 96, 288, 96, 96, 88, 2408, 192, 192, 960, 192, 96, 192, 384, 288, 384, 192, 192, 192, 96, 184, 0
VOLUME:		.word 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50, 50
INSTRUMENTO:	.word 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24

.text

j MAIN

.macro	sound(%note)
	add $t0, $zero, %note
	jal SOUND
.end_macro
SOUND:
	sll $t0, $t0, 2		#t0 = note*4

	la $t1, NOTAS		#t1 = &nota[0]
	add $t1, $t0, $t1	#t1 = &nota[note]
	lw $a0, ($t1)		#a0 = nota[note]
	lw $t1, INIT		#t1 = offset nota
	add $a0, $a0, $t1	#a0 += offset

	la $t1, DURACAO		#t1 = &duracao[0]
	add $t1, $t0, $t1	#t1 = &duracao[note]
	lw $a1, ($t1)		#a1 = duracao[note]

	la $t1, DURACAO		#t1 = &duracao[0]
	add $t1, $t0, $t1	#t1 = &duracao[note]
	lw $a0, ($t1)		#a0 = duracao[note]


	
	lw $a0, 0(%note)
	lw $a1, 0(%duration)
	lw $a2, 0(%instrument)
	lw $a3, 0(%volume)
	li $v0, 31	#syscall for midi
	syscall

	jr $ra

.macro	sleep(%duration)
	lw $a0, 0(%duration)
	li $v0, 32	#syscall for sleep
	syscall
.end_macro

MUSIC_INIT:
	li $v0, 30
	sw $a0, 0(LAST_T)
	li $a0, 0
	sw $a0, 0(CUR_N)
	jr $ra
MUSIC:
	sw $t9, 0(CUR_N)
	sll $t9, $t9, 2
	sw $t8, DTIME
	sw $t9, LAST_T
	#if(T_ATUAL - LAST_T >= DTIME)
		
	MUSIC_DEPOIS: jr $ra

